apiVersion: autoscaling.k8s.io/v1
kind: AutoVPA
metadata:
  # Hardcoded name. Only one config per namespace is allowed
  name: autoautovpa-operator-config
  namespace: default
spec:
  updatePolicy:
    updateMode: Auto
    minReplicas: 1
  resourcePolicy:
    mode: Auto
    minAllowed:
      cpu: 15m
      memory: 100Mi
    maxAllowed:
      cpu: 1
      memory: 20Gi
    ControlledResources:
      - ResourceCPU
      - ResourceMemory
    ControlledValues: "Requests"
  excludedDeployments:
    - "exclude-this-deployment"